<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sorpresa de Amor</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Animaciones clave -->
  <style>
    @keyframes float{0%{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(10deg)}100%{transform:translateY(0) rotate(0)}}
    @keyframes beat{0%{transform:scale(1)}25%{transform:scale(1.1)}40%{transform:scale(1)}60%{transform:scale(1.2)}100%{transform:scale(1)}}
    @keyframes typing{from{width:0}to{width:100%}}
    @keyframes blink-caret{from,to{border-color:transparent}50%{border-color:#e60026}}
    .heart-beat{animation:beat 1.5s infinite}
    .typewriter{
      overflow:hidden;border-right:.15em solid #e60026;white-space:nowrap;
      letter-spacing:.15em;animation:typing 3.5s steps(40,end),blink-caret .75s step-end infinite;
    }
  </style>
</head>
<body class="bg-gradient-to-b from-pink-50 to-rose-100 min-h-screen">

  <!-- Fireworks -->
  <canvas id="fireworks" class="fixed top-0 left-0 w-full h-full pointer-events-none"></canvas>

  <!-- Main container -->
  <div class="relative z-10 flex flex-col items-center justify-center min-h-screen p-4">

    <!-- Photo -->
    <div id="photoMemory" class="mb-8 transition-all duration-1000 opacity-0 transform -translate-y-10">
      <img src="foto_novia.png" alt="Mi novia y yo" class="rounded-xl shadow-2xl border-4 border-white w-full max-w-md object-cover">
    </div>

    <!-- Letter -->
    <div id="loveLetter" class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 max-w-md shadow-lg transition-all duration-1000 opacity-0 transform translate-y-10 hidden">
      <h2 class="text-2xl font-bold text-rose-600 mb-4">Para mi Cachetona</h2>
      <p id="letterContent" class="text-gray-700 font-serif"></p>
      <div id="signature" class="mt-6 text-right font-dancing text-2xl text-rose-600 opacity-0 transition-opacity duration-1000"></div>
    </div>

    <!-- Tree -->
    <div id="loveTree" class="relative w-64 h-64 mt-8">
      <svg viewBox="0 0 200 200" class="w-full h-full">
        <path d="M100 150 L100 50" stroke="#5E3A1E" stroke-width="8" stroke-linecap="round"/>
        <path d="M100 60 L60 90" stroke="#5E3A1E" stroke-width="6" stroke-linecap="round"/>
        <path d="M100 60 L140 90" stroke="#5E3A1E" stroke-width="6" stroke-linecap="round"/>
        <path id="heart1" d="M70 80 Q80 60 90 80 T110 80" fill="none" stroke="#e60026" stroke-width="2" class="opacity-0 heart-beat"/>
        <path id="heart2" d="M130 100 Q140 80 150 100 T170 100" fill="none" stroke="#e60026" stroke-width="2" class="opacity-0 heart-beat"/>
        <path id="heart3" d="M90 120 Q100 100 110 120 T130 120" fill="none" stroke="#e60026" stroke-width="2" class="opacity-0 heart-beat"/>
      </svg>
    </div>

    <!-- Reveal button -->
    <button id="revealBtn" class="mt-8 px-6 py-3 bg-rose-600 text-white rounded-full shadow-lg hover:bg-rose-700 transition-all transform hover:scale-105">
      Descubre mi Sorpresa
    </button>

    <!-- Floating hearts -->
    <div id="floatingHearts" class="fixed top-0 left-0 w-full h-full pointer-events-none"></div>

    <!-- Music button -->
    <div class="fixed bottom-4 right-4">
      <button id="musicBtn" class="p-3 bg-white/80 rounded-full shadow-lg hover:bg-white transition-all">
        <span class="text-rose-600">🎵</span>
      </button>
    </div>
  </div>

  <!-- Main script -->
  <script>
  document.addEventListener('DOMContentLoaded',()=>{

    /* ---------- CONFIG ---------- */
    const herName="el amor de mi vida";
    const config={
      herName,
      ourSong:"Music/rauw.mp3",
      loveLetter:`Mi amor:\n
Desde aquel 27 de abril de 2022, mi vida cambió por completo. No solo encontré una novia, encontré a mi mejor amiga, a mi compañera de aventuras, a mi calma en los días difíciles y a mi risa en los días felices.\n
Llevamos 3 años caminando juntos… y cada día contigo ha sido un regalo que no dejo de agradecerle a Dios. A veces me detengo a pensar en todo lo que hemos vivido y solo puedo sonreír, porque si esto es el amor, entonces quiero vivirlo contigo por el resto de mi vida.\n
Frases para ti, mi cachetoncita hermosa:\n
“No te elegí por casualidad, te elegí porque al encontrarte supe que eras tú.”\n
“Contigo no quiero un final feliz, quiero una historia sin final.”\n
“De todas mis decisiones, tú has sido mi favorita.”\n
“Si volvieran a pasar los años, te volvería a escoger mil veces.”\n
“Tú y yo no somos perfectos, pero juntos somos invencibles.”\n
“A tu lado he aprendido que el amor no se dice, se demuestra.”\n
“Eres ese ‘algo’ que no quiero perder nunca.”\n
Gracias por cada gesto, por cada palabra, por cada abrazo. Por tu paciencia, por tus locuras, por tus sueños compartidos. Gracias por hacerme sentir importante, amado y acompañado.\n
Te amo con todo lo que soy, con lo bueno, con lo que intento mejorar, con lo que aprendo cada día por ti y para ti.\n
Gracias por amarme, por elegirme y por estar.\n
Aún nos queda mucho por vivir, muchos sueños por construir, y muchos días para seguir diciendo “sí” a esta historia que comenzó un 27 de abril... y que espero nunca tenga final.`,
      signature:"Con todo mi amor, mi enojona hermosa"
    };
    /* ---------- FIN CONFIG ---------- */

    /* ---------- Selectores ---------- */
    const photo=document.getElementById('photoMemory');
    const letter=document.getElementById('loveLetter');
    const letterContent=document.getElementById('letterContent');
    const signature=document.getElementById('signature');
    const revealBtn=document.getElementById('revealBtn');
    const tree=document.getElementById('loveTree');
    const hearts=['heart1','heart2','heart3'];
    const audio=new Audio(config.ourSong);
    const musicBtn=document.getElementById('musicBtn');
    let musicPlaying=false;

    /* ---------- Fireworks ---------- */
    const canvas=document.getElementById('fireworks'),ctx=canvas.getContext('2d');
    function resize(){canvas.width=innerWidth;canvas.height=innerHeight;} resize();addEventListener('resize',resize);
    class Particle{constructor(x,y,c){this.x=x;this.y=y;this.c=c;this.r=Math.random()*2+1;this.v={x:(Math.random()-.5)*8,y:(Math.random()-.5)*8};this.a=1;this.d=Math.random()*0.015+0.01;}
      draw(){ctx.globalAlpha=this.a;ctx.beginPath();ctx.arc(this.x,this.y,this.r,0,6.28);ctx.fillStyle=this.c;ctx.fill();}
      update(){this.v.y+=0.05;this.x+=this.v.x;this.y+=this.v.y;this.a-=this.d;this.draw();return this.a>0;}}
    let parts=[];function boom(x,y,c){for(let i=0;i<100;i++)parts.push(new Particle(x,y,c));}
    function animateFW(){requestAnimationFrame(animateFW);
      ctx.fillStyle='rgba(255,253,252,.05)';ctx.fillRect(0,0,canvas.width,canvas.height);
      parts=parts.filter(p=>p.update());
      if(parts.length<200&&Math.random()<0.02)boom(Math.random()*canvas.width,Math.random()*canvas.height*0.5,
        `hsl(${Math.random()*60+330},100%,${Math.random()*30+50}%)`);
    }

    /* ---------- Start ---------- */
    setTimeout(()=>{photo.classList.remove('opacity-0','-translate-y-10');animateFW();},500);

    /* ---------- Reveal ---------- */
    revealBtn.addEventListener('click',()=>{
      revealBtn.classList.add('opacity-0','invisible');
      tree.classList.add('opacity-0','scale-50');

      setTimeout(()=>{
        letter.classList.remove('hidden','opacity-0','translate-y-10');
        letterContent.innerHTML='';
        let i=0,speed=25;
        (function type(){
          if(i<config.loveLetter.length){
            const ch=config.loveLetter.charAt(i);
            letterContent.innerHTML+=ch==='\n'?'<br>':ch;
            i++;setTimeout(type,ch==='\n'?speed*3:speed);
          }else{
            signature.textContent=config.signature;
            setTimeout(()=>signature.classList.remove('opacity-0'),500);
            burstHearts();
          }
        })();
      },800);

      hearts.forEach((h,idx)=>setTimeout(()=>{
        const e=document.getElementById(h);
        e.classList.remove('opacity-0');e.setAttribute('fill','#e60026');
      },idx*300));

      burstHearts();
    });

    /* ---------- Hearts animation ---------- */
    function burstHearts(){
      const cont=document.getElementById('floatingHearts');
      const colors=['#e60026','#ff66b3','#ff9999'];
      const emoji=['💛','👸','🌻','💐','👩🏻‍❤️‍👨🏻'];
      for(let i=0;i<30;i++){
        setTimeout(()=>{
          const d=document.createElement('div');
          d.innerHTML=emoji[Math.floor(Math.random()*emoji.length)];
          d.className='absolute opacity-0';
          d.style.fontSize=Math.random()*32+16+'px';
          d.style.left=Math.random()*100+'%';
          d.style.top=Math.random()*100+'%';
          d.style.color=colors[Math.floor(Math.random()*colors.length)];
          d.style.animation=`float ${Math.random()*4+2}s infinite ease-in-out`;
          cont.appendChild(d);
          setTimeout(()=>d.classList.remove('opacity-0'),100);
          setTimeout(()=>d.remove(),10000);
        },i*150);
      }
    }

    /* ---------- Music button ---------- */
    musicBtn.addEventListener('click',()=>{
      if(musicPlaying){audio.pause();musicBtn.innerHTML='<span class="text-rose-600">🎵</span>';}
      else{audio.play();musicBtn.innerHTML='<span class="text-rose-600">🔊</span>';}
      musicPlaying=!musicPlaying;
    });

  });
  </script>
</body>
</html>
